## 前言：

NAS的通知信息，可能很多小伙伴平时没有那么关注，但是在特定的情况下，它可能能救你一命，比如你在没有使用的时候，突然你的对象登录了你的账号，而你却不知道，等你知道的时候已经百口莫辩了。

![](https://koryking.top:4430/i/2025/05/23/682f5eacaa120.png)

当然这个只是整活的场景，实际的作用还是非常多的，比如第一时间知道异地的登录尝试，套件的更新通知等等。那有的小伙伴又要问了，绿联云的通知现在只能在客户端或者web端看，那我总不能一直盯着吧？所以老K也是花了一段时间，写了几个脚本，封装成了docker，定时将NAS的消息推送到微信上，让你不错过任何一个NAS的重要通知！

![](https://koryking.top:4430/i/2025/05/23/682f5fbf445d3.png)

## 说明和注意事项：

* 代码地址：https://github.com/bilibili-koryking/nasnotify，所有的代码都已开源，所有的过程和产生的数据都是在你部署此docker的本地进行的，所以可以放心使用。
* 使用须知：有一点需要注意，目前nasnotify的第一个版本，因为老K比较菜，还没完全想好怎么接收双重验证的验证码，所以需要关闭绿联云的双重验证功能才能正常使用，所以各位小伙伴请自行衡量。
* 最后可以的话，到github给这个项目点个星星，不胜感激。

## 准备工作：

nasnotify的微信通知，老K综合比较下来选择了企业微信的群机器人方式，完全免费，有大厂背书，可以直接在微信中查看，方便且稳定。

### 创建企业

**如果你直接使用企业微信不需要使用微信接收消息，或者能联系到企业管理员给你添加微信的权限，那么这一步骤可以忽略。**

首先手机上下载一个企业微信，注册并登录，点击右上角的三横杠。

![](https://koryking.top:4430/i/2025/05/23/682f701b20ed7.png)

点击创建/加入企业，选择全新创建企业。

![](https://koryking.top:4430/i/2025/05/23/682f70656c9c2.png)

企业信息除了姓名，其他的都随便填一下就行，填完姓名后，点击创建，会进行实名认证，认证通过后企业就创建成功了。

![](https://koryking.top:4430/i/2025/05/23/682f70ff2b613.png)

### 创建群聊

如果是自己新创建的企业，那么这个全员群就自己一个人，可以直接拿来使用，如果是已有的企业，可以自己拉个小号或者其他人创建一个群聊（添加完机器人后可以把另一个人踢出去）。

![](https://koryking.top:4430/i/2025/05/23/682f71773793e.png)

点进群聊，点击右上角三个点。

![](https://koryking.top:4430/i/2025/05/23/682f72320b916.png)

点击群机器人。

![](https://koryking.top:4430/i/2025/05/23/682f725bbd7a5.png)

点击添加机器人。

![](https://koryking.top:4430/i/2025/05/23/682f727bb11a2.png)

点击添加。

![](https://koryking.top:4430/i/2025/05/23/682f72974e459.png)

设置一个自己喜欢的名字，继续点击添加。

![](https://koryking.top:4430/i/2025/05/23/682f72b06cf03.png)

看到这个页面就表示添加成功了，将这个页面的webhook地址复制下来备用，点击完成，退出机器人添加流程。

![](https://koryking.top:4430/i/2025/05/23/682f72dc9c5cd.png)

### 将企业微信绑定到微信

电脑浏览器搜索企业微信管理后台，使用手机的企业微信账号扫码登录，注意选择你需要接收消息的那个企业。

![](https://koryking.top:4430/i/2025/05/23/682f738405a36.png)

登录成功后，点击上方我的企业菜单，再点到微信插件。

![](https://koryking.top:4430/i/2025/05/23/682f73f678c46.png)

使用微信扫描这里的二维码即可将企业微信绑定到微信，后续也可以使用微信接收到对应企业微信的信息了。

![](https://koryking.top:4430/i/2025/05/23/682f74463f33a.png)

## nasnotify部署：

经过漫长的准备工作，终于可以正式部署了，部署的步骤很简单，直接打开绿联云的客户端，再打开docker，点到项目菜单，点击创建项目。

![](https://koryking.top:4430/i/2025/05/23/682f7497cbe62.jpg)

项目名称自己设置一下，再将以下的代码复制粘贴到compose配置框中，注意格式一定要和我的保持一致，包括空格，不然配置可能会报错。

![](https://koryking.top:4430/i/2025/05/23/682f74e452dc1.jpg)

```。
services:
  nasnotify:
    # 镜像名称和标签
    image: docker.1ms.run/koryking/nasnotify:latest
    restart: unless-stopped
    # 环境变量设置
    environment:
        UGREEN_CONFIGS: |
         [
            {
                "ip_port": "192.168.66.31:9999", 
                "username": "koryking", 
                "password": "xxxxx", 
                "notify_type_name": "绿联云6800pro"
            },
            {
                "ip_port": "192.168.66.50:9999",
                "username": "koryking",
                "password": "xxxxxxx", 
                "notify_type_name": "绿联云4800"
            },
            {
                "ip_port": "192.168.66.43:9999",
                "username": "koryking", 
                "password": "xxxxxx", 
                "notify_type_name": "绿联云4300P"
            }
         ]
        WXPUSH_SPT: 'xxxxxxxxxxx'
        INTERVAL_MINUTES: 1
        TZ: 'Asia/Shanghai'
    volumes:
        - ./app/log:/app/log
```

先别急着点击部署，代码中还有一些东西需要进行修改，可以看到中括号中一共有三台NAS的配置，可以按照这个格式根据自己的情况进行删除和添加，其中ip_port后的内容需要替换成你自己绿联云http协议下web端的ip和端口号，username则是绿联云的用户名，password是对应用户的密码，notify_type_name则是通知消息第一行显示的机器名称，用以区分是哪个机器产生的通知，你想设置成什么样都行。

![](https://koryking.top:4430/i/2025/05/23/682f76ec55ce0.png)

WXPUSH_SPT后的内容就要回到我们刚才复制下来的群机器人webhook地址了，将地址中key=后的字符串复制替换进来，INTERVAL_MINUTES则是代表多少分钟推送一次，1就表示1分钟，当然你设置0.5也行，0.5就代表30s，不过个人觉得没太大必要，其他的东西都不需要动，直接点击立即部署。

![](https://koryking.top:4430/i/2025/05/23/682f77401fb14.png)

耐心等待镜像拉取和容器创建，成功后，就可以看到微信中已经接收到NAS的消息了，首次创建会推送NAS最近的10条通知信息，后续只会在NAS有新通知时才会推送通知内容，如果容器启动失败，则表示填入的compose配置信息有误，自己检查下，如果确定配置没有问题，那就评论区说明下情况，留言告诉老K。

![](https://koryking.top:4430/i/2025/05/23/682f7837ac8c6.png)
